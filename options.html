<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>JP Mail Check Extension – 設定</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>

    /* テーマ変数 */
    :root{
      --bg:#ffffff;
      --fg:#111;
      --muted:#666;
      --border:#c9c9c9;
      --btn-bg:#0a84ff;         /* macOSっぽいブルー */
      --btn-fg:#fff;
      --btn-bg-hover:#006be6;
      --btn-border:#0060cf;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#121212;
        --fg:#f2f2f2;
        --muted:#a9a9a9;
        --border:#3a3a3a;
        --btn-bg:#2b7bff;
        --btn-fg:#fff;
        --btn-bg-hover:#1f60cc;
        --btn-border:#1a55b5;
      }
    }

    /* 全体 */
    body{
      background:var(--bg);
      color:var(--fg);
    }

    /* 入力類（枠が暗いテーマで埋もれないように） */
    input[type="text"], input[type="email"]{
      background:transparent;
      color:var(--fg);
      border:1px solid var(--border);
      border-radius:8px;
      padding:8px 10px;
    }

    /* ラベルや補足 */
    .hint{ color:var(--muted); }

    /* ボタン：強いコントラスト */
    button{
      appearance:none;
      border:1px solid var(--btn-border);
      background:var(--btn-bg);
      color:var(--btn-fg);
      border-radius:10px;
      padding:8px 14px;
      font-weight:600;
      cursor:pointer;
      transition:background .15s ease, transform .02s ease;
    }
    button:hover{ background:var(--btn-bg-hover); }
    button:active{ transform:translateY(1px); }

    /* セカンダリ（グレー）ボタンが欲しい場合のクラス */
    button.secondary{
      background:transparent;
      color:var(--fg);
      border:1px solid var(--border);
    }
    button.secondary:hover{
      background:rgba(127,127,127,.12);
    }

    /* 無効ボタンも読める明度に */
    button:disabled{
      opacity:.6;
      cursor:not-allowed;
      color:var(--btn-fg);
      background:var(--btn-bg);
      border-color:var(--btn-border);
    }

  </style>
</head>
<body>
  <h1>JP Mail Check Extension – 設定</h1>

  <form id="form">
    <fieldset>
      <legend>チェック方式</legend>
      <label><input type="radio" name="checkMode" value="vt" /> VirusTotal を使ってチェック（推奨）</label>
      <label><input type="radio" name="checkMode" value="gsb" /> Google Safe Browsing を使ってチェック</label>
      <label><input type="radio" name="checkMode" value="pt" /> PhishTank を使ってチェック</label>
      <p class="hint">ここで選んだ方式が、ツールバーの「Check &amp; Report」ボタン実行時に使われます。</p>
    </fieldset>

    <fieldset>
      <legend>API Keys</legend>
      <label for="vtApiKey">VirusTotal API Key</label>
      <input id="vtApiKey" type="text" placeholder="xxxxxxxxxxxxxxxxxxxxxxxxxxxx" />

      <label for="gsbApiKey">Google Safe Browsing API Key</label>
      <input id="gsbApiKey" type="text" placeholder="xxxxxxxxxxxxxxxxxxxxxxxxxxxx" />

      <label for="ptAppKey">PhishTank App Key（任意・未設定可）</label>
      <input id="ptAppKey" type="text" placeholder="xxxxxxxxxxxxxxxxxxxxxxxxxxxx" />
    </fieldset>

    <fieldset>
      <legend>報告先</legend>
      <div class="row">
        <div>
          <label for="toAntiPhishing">フィッシング対策協議会</label>
          <input id="toAntiPhishing" type="email" value="info@antiphishing.jp" />
        </div>
        <div>
          <label for="toDekyo">迷惑メール相談センター</label>
          <input id="toDekyo" type="email" value="meiwaku@dekyo.or.jp" />
        </div>
      </div>

      <label><input id="attachEml" type="checkbox" checked /> 元メール（.eml）を添付する（推奨）</label>
    </fieldset>

    <div class="actions">
      <button id="save" type="submit">保存</button>
      <button id="reset" type="button">デフォルトに戻す</button>
      <span id="status" class="hint"></span>
    </div>
    <!-- 許可リスト -->
    <h3>許可ドメイン（ホワイトリスト）</h3>
    <p class="help">
      1行に1件。例: <code>example.com</code> / <code>*.trusted.jp</code> / <code>.mozilla.org</code><br>
      行末に <code>#</code> または <code>//</code> を書くとコメントとして無視されます。<br>
      例:
    </p>
    <pre class="help">
    # この行はコメント
    example.com # ここもコメント
    safe.trusted.jp // ここもコメント
    </pre>
    <textarea id="allowlistDomains" rows="6" style="width:100%;"></textarea>
  </form>
  <!-- 保存ステータス（どこかフッター付近に） -->
  <div id="saveStatus" aria-live="polite" style="
    position: sticky; bottom: 0; margin-top: 12px; padding: 8px 10px;
    border: 1px solid transparent; border-radius: 8px; font-size: 13px;
    display: none;
  "></div>
  <script src="options.js"></script>
</body>
</html>
